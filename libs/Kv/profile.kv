#:import get_color_from_hex kivy.utils.get_color_from_hex
<Profile>:
	name:"Profile"
	id:profile
	ScrollView:
		do_scroll_y:True
		MDFloatLayout:
			size_hint:1,1
			md_bg_color:app.theme_cls.primary_color	          
			MDBoxLayout:
				id:box
				size_hint:.9,1
				pos_hint:{"center_x":.5}
				md_bg_color:get_color_from_hex('#f3f3f3')
				AnchorLayout:
					pos_hint:{"center_y":.75}
					MDIconButton:
						id:camera
						icon:""
						user_font_size:"25dp"
						on_release:
							root.file_manager_open()						
				AnchorLayout:
					pos_hint:{"center_y":.75}
					AsyncImage:
						id:profile_image
						source:""
						size_hint:None,None
						height:"400px"
						width:"400px"
						canvas.before:
							Color:
								rgba:get_color_from_hex('#a2d7fb')
							RoundedRectangle:
								radius:[20]
								pos:self.pos
								size:self.size
				
			MDIconButton:	
				icon:"window-close"
				theme_text_color: 'Custom'
				text_color: 0,0,0,1
				pos_hint:{"center_x":.1,"center_y":.95}
				ripple_scale:0
				on_release:	
					app.back()
			AnchorLayout:
				pos_hint: {'center_x': .68, 'center_y': .95}
				spacing:10
				MDSpinner:
					id:pro_spinner
					color:0,0,0,1
					size_hint: None, None
					size: dp(18), dp(18)
					line_width:"1.5dp"
					active: True if pro_label.text == "updating..." else False
			AnchorLayout:
				pos_hint: {'center_x': 1.23, 'center_y': .95}
				spacing:10
				MDLabel:
					id:pro_label
					text:""
					disabled:True
					font_name:"Ubuntu/Ubuntu-Medium"
			MDBoxLayout:
				size_hint:.9,.6
				orientation:"vertical"
				pos_hint:{"center_x":.5}
				padding:40
				spacing:10
				MDTextField:
					id:name_field
					text:app.Username
					helper_text:"" 
					text_color:0,0,0,1
					font_name:"Ubuntu/Ubuntu-Medium"
					helper_text_mode:"on_focus"
					disabled:True
					color_mode:"custom"
					line_color_normal:0,0,0,1
					line_color_focus:get_color_from_hex("00dbff")
					icon_right:""	
					icon_right_color:app.theme_cls.primary_color
				MDTextField:
					id:class_field
					text:app.UserClass
					font_name:"Ubuntu/Ubuntu-Medium"
					text_color:0,0,0,1
					helper_text:"class"
					helper_text_mode:"on_focus"
					disabled:True
					icon_right:""
					icon_right_color:app.theme_cls.primary_color
					color_mode:"custom"	
					line_color_normal:0,0,0,1
					line_color_focus:get_color_from_hex("00dbff")
				MDTextField:
					id:contact_field
					text:app.UserPhone
					helper_text:"phone"
					text_color:0,0,0,1
					font_name:"Ubuntu/Ubuntu-Medium"
					helper_text_mode:"on_focus"
					disabled:True
					color_mode:"custom"
					icon_right:""		
					icon_right_color:app.theme_cls.primary_color
					line_color_normal:0,0,0,1
					line_color_focus:get_color_from_hex("00dbff")
				MDTextField:
					id:email_field
					color_mode:"custom"
					text:app.UserEmail
					helper_text:"email"
					text_color:0,0,0,1	
					font_name:"Ubuntu/Ubuntu-Medium"
					helper_text_mode:"on_focus"
					disabled:True
					icon_right:""
					icon_right_color:app.theme_cls.primary_color
					line_color_normal:0,0,0,1
					line_color_focus:get_color_from_hex("00dbff")
				MDBoxLayout:
					orientation:"horizontal"
					AnchorLayout:
						pos_hint:{"center_x":.8}
						MDFillRoundFlatIconButton:
							text:"edit"
							icon:"pencil"
							font_name:"Ubuntu/Ubuntu-Medium"
							on_release:
								root.text_to_edit()
					AnchorLayout:
						pos_hint:{"center_x":.8}
						MDFillRoundFlatIconButton:
							text:"save"
							pos_hint:{"center_x":.8,"top":.5}
							icon:"content-save"
							font_name:"Ubuntu/Ubuntu-Medium"
							on_release:
								pro_label.text = "updating..."
								#profile_image.reload()
								app.reload_home_image()
								root.save_to_edit(name_field,class_field,contact_field,email_field)
				Widget: